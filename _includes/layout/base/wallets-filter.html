{% comment %}
This file is licensed under the MIT License (MIT) available on
http://opensource.org/licenses/MIT.
{% endcomment %}




<script>
  
  // Add margin-bottom for walletmenu depending on the height of the second accordion          
  function calculateHeight(element) {
    var walletMenu = document.querySelector(".walletmenu");
    walletMenu.style.marginBottom = element.offsetHeight + 'px'; 
  }  
  
  function accordionDesktop() {
    var walletMenu = document.querySelector(".walletmenu");
    var acc = document.getElementsByClassName("js-acc-item");
    var accSub = document.querySelectorAll(".js-acc-subitem");

    for (var i = 0; i < acc.length; i++) {
      acc[i].addEventListener("click", function(event) {
        if (document.documentElement.clientWidth > 768) {
          var activeItem = event.target.parentNode;

          this.classList.add('active')
          activeItem.classList.add("is-active");
          
          if (this.dataset.accordion) {
            var activeOsAccordion = activeItem.querySelector(".walletmenu-subaccordion");
            calculateHeight(activeOsAccordion);
          } else {
            walletMenu.style.marginBottom = '0px';
          }          
          
          // Hide not selected list items
          for (var index = 0; index < acc.length; index++) {
            if (!(this == acc[index])) {              
              acc[index].classList.remove("is-active");
              acc[index].classList.remove("active");
            }
          }
          
        }
      });
    }

    for (var ii = 0; ii < accSub.length; ii++) {
      var subItem = accSub[ii];
      subItem.addEventListener('click', function() {
        
        console.log(this);
        this.classList.add('active');
        
        for (var a = 0; a < accSub.length; a++) {
          if (accSub[a] != this) {
            accSub[a].classList.remove('active');
          }
        }
        
      });
    }
  }
  accordionDesktop();

  function showRelevantWallets() {
    var allWallets = document.querySelectorAll("div[data-category]");    
    var pageUrl = (window.location.pathname).split("/").filter(Boolean);
    var platform = pageUrl[2];
    var os = pageUrl[3];
    

    if (platform === "hardware" || platform === "web") {
      os = platform;
    }

    for (var i = 0; i < allWallets.length; i++) {
      var wallet = allWallets[i];
      var walletCategory = wallet.dataset.category;

      if (os != walletCategory) {
        wallet.classList.add('is-hidden');
      }
      
    }    
  }
  showRelevantWallets();

  function hideNotRelevantWallets() {
    var selectorsList = document.querySelectorAll("a[data-selector]");
    var allWallets = document.querySelectorAll("div[data-category]");    
    
    for (var i = 0; i < selectorsList.length; i++) {
      var selector = selectorsList[i];
      
      selector.addEventListener('click', function (e) {
        var selectedCategory = e.target.dataset.selector;

        // Remove .is-hidden class from all wallets
        allWallets.forEach(function(wallet) {
          wallet.classList.remove('is-hidden');
        })

        // Hide not relevant wallets
        for (var ii = 0; ii < allWallets.length; ii++) {
          var wallet = allWallets[ii];
          var walletCategory = wallet.dataset.category;
          
          if (selectedCategory != walletCategory) {
            wallet.classList.add('is-hidden');
          } 
        }

      })
    }
  }
  hideNotRelevantWallets();
</script>
